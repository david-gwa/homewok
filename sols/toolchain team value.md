
## 整车项目阶段

域控制器到货(7月底)
Autosar中间件预计到货(8月底)
道路融合、决策控制、目标融合算法开发、集成，预计完成(8月底)
ET车测试开始(9月份）

研发阶段，HWA/HWP项目的各个子模块预计9月份转域控制器。

基于域控制器上mf4数据记录、工具链建设。

与此同时，为实现融合、决策规划快速问题发现(测试)，分别还会保留运作工控机ros，dlt/*.dat 数据分析。


## 融合现状

#### 输入 

传感器走 CAN/ETH 通道。现有corner-radar, middle-range-radar, rear-radar, EPM-Cam, Ifv-Cam 都有CAN口，可直接接入CANape。但后期可能引入410camera, 只有ETH接口。 CANape无法解析原始ETH包，目前也没有实现ETH数据解析/转发。


#### 数据记录

目前(过渡阶段)采用了两套数据记录：rosbag && mf4。

rosbag方案，采集车安装工控机环境，属于“研发阶段一”方案。对现有传感器支持成熟。

mf4方案，采集车安装autoBox环境，所有模块都运行在autoBox内，较一致。属于“研发阶段二”方案。对CANape设备有依赖，但商业软件成熟度可以保障。

TODO: 量产后的数据记录形式，满足融合算法迭代需求。


#### 研发工具

现有工具：

* rosbag单步调试工具(linux)

* mf4回放工具(windows)。 限制： windows lib授权

* rosbag rviz回放(Linux)

* 融合功能评价(rosbag/mf4 -> csv -> kpi)


准备考虑的其他工具:

* rosbag webviz 拖拽工具(windows & linux)

* CANape mf4 回放工具(windows)。 限制：CAPape license收费

* 开源mf4解析、转发rosbag工具 (linux)。限制：开源潜在bug

TODO: 融合子模块性能评估工具，依赖大量传感器数据注入，适合linux生态。



## 决策规划现状

#### SiL 仿真

决策模型开发，测试现在主要依赖SiL(Matlab)回环仿真测试。

TODO: 

目前问题：

* SiL测试的算法 与 实车算法 不同步。 solution: CICD

* SiL只能暴露道路级别的问题，目标融合等实车问题，缺乏支撑

* 仿真工具本身缺乏有效维护，当前支持hwa/hwp/l4

* 缺乏测试benchmark场景建设规划

* 缺乏决策子系统性能评价系统

#### 实车数据

数据记录格式陆陆续续分别使用过： rosbag, json, dlt, dat, mf4 

实车数据目前主要用于系统问题诊断。对数据注入的覆盖测试没有形成需求。

问题：缺乏统一的数据格式，开发/测试/验证工具混乱。目前是沉淀了ros工具、dlt工具、dat开发的工具、以及mf4工具等。但是各个数据类型背后的工具缺乏打通，也由不同的组在开发维护，缺乏统一管理

dlt 是东软开发的工具

dat 是实车测试(腾)开发，并由仿真组(崔)集成的，但实车上有性能问题

rosbag由仿真组(崔)开发，但后续没有维护

mf4 windows工具由l3系统架构组(刘超)开发并维护，付费lib, 稳定性较好，缺乏linux迁移能力

mf4 linux工具由仿真组(david)开发并维护，开源，稳定性不够，可迁移linux


#### 研发工具

* dlt记录，加模型单步调试
* dat记录，加单步调试
* 规划基于mf4的大量数据注入测试(TODO)

配合量产节点(域控制器)，可主要规划mf4工具生态。用于系统诊断。

为量产后的数据使用铺垫，需要建立dlt数据的工具生态。



#### 融合决策人员需求

* 熟悉融合、决策模块业务开发流程
* 工程能力强、知识面广(网络编程、C/C++/python混合开发经验、ros开发经验、matlab开发经验、分布式开发经验)
* 需要2 ~4名


## HWA(AEB)现状

#### 测试数据

外部：sensor数据, 外景camera数据
内部： fusion, obj select, vehicle CAN 

#### 测试验证

* SiL 仿真测试，法规场景、非法规场景建设与测试中。 依赖prescan

目的：AEB及格线测试
TODO: 功能测试场景库、系统性能验证场景库 缺乏累积；场景库建立方法缺乏理论

* Vil 仿真测试，主要测法规场景

目的：提高实车测试效率，通过法规场景输入，得到AEB标定参数边界。

现状：基于lgsvl开源平台自研开发。流程通路形成，场景脚本还在持续开发中。

风险项：开源项目不含的类别，e.g. 自行车等，需要独立开发。反馈的参数精度、置信度不保障


* 开环测试，大量实车数据注入

目的：利用真实(随机)场景，评估AEB整体性能、场景覆盖度检测、改进AEB算法

现状: 实车数据采集、存储采用mf4。当前，开环测试框架、mdf解析功能已开发完成; 后处理逻辑缺乏(需要AEB项目组提供)。

风险：独立开发。依赖开源asammdf库，redis_queue库等；依赖数据中心存储服务(规划中)、计算节点(规划中)。开环测试框架稳定性、鲁棒性缺乏验证


* 实车测试

hwa/aeb小组负责推进

测试方案:

传感器数据进 autoBox(跑aeb算法)
另外，传感器数据、autoBox(aeb算法输出)、外景camera(udp)，进CANape设备(记录数据用)

camera传感器还有工作量。


* 开发集成流程

目前还没有形成第一版的通路。持续集成流程缺乏


#### 人员需求

* 有ADAS/ADS功能开发经验，熟练python，c++ 数据处理模块，具有多线程开发经验、公有云使用经验 (1~2名)



## 数据资产管理

涵盖：

* 地图数据

* 实车路测数据

* 仿真数据(场景定义元数据、kpi数据)

* 系统/子系统开发与测试验证场景数据集


基础服务:

* 数据包文件管理、存储web终端(标签、查询、可视化等)

* 数据应用，尚未开展

* 其他基础服务，e.g. 数据安全等，尚未考虑

现状:

* 依赖数据中心IaaS & PaaS (规划中)

* 自研开发web终端，开发能力不够，处于demo阶段

* 数据应用逻辑 缺乏输入，缺乏人手开展。

人员需求：如果自研开发，需要补充有经验的数据平台前、后台开发架构人员(各2~4名)。 

自研的价值：建立web前后台开发能力，可支撑更多横向项目。包括HMI、用户app、远程管理等等。
自研的弊端：人才建立需要时间，出成果慢。

招聘要求：
熟悉主流前端开发框架(2年左右)，后台java开发经验3年以上; 有数据应用类开发经验、熟悉常用数据模块框架(python, js)
具有微服务开发维护经验


## 数据中心

#### 数据中心建设与需求整理

@孟琦玮

#### 数据中心PaaS

现阶段业务：

* AEB 开环仿真
* L3 云仿真
* 数据资产部署

未来业务：

* AI(感知、决策)
* 车队管理
* 数据应用
* 开发环境迁移
* 办公服务(email, sms)

人员需求：

云运维(存储、容器k8s)经验，现有业务打包上云。后期根据业务需要横向扩展人员。

@张艳涛(数据中心应用需求对接和实现) + 2~4名业务开发人员(熟练docker, k8s, 一年以上公有云(阿里云、aws等)使用开发经验)  + 一名(兼职)数据中心硬件运维人员



## 测试验证

逄老师小组统一组织

#### 传感器测试验证

#### 整车测试验证

#### 真值系统

#### 人员需求 

@任亚星 补充。

 

## hwa量产数据链路

规划中，与北京团队配合

可能要解决的问题:

* 记录哪些数据、数据格式

* 触发机制

* 网络通路相关开发(假定，网关透传，需要在域控制器端实现: 协议实现、网络异常处理、CAN缓存设计)

* 数据上云的预处理

* 数据后台逻辑开发

* 云运维 (CICD/DevOps， 数据存储、计算管理)


## 工具链组工作规划

#### 建立 mf4 和 rosbag 两套研发数据链路

* 统一数据(采集、存储、使用接口)标准

* 统一数据管理

* 建立mf4数据生态: 解析、查看、回放、可视化、数据注入单步调试(windows)等生态

* 建立rosbag数据生态： 解析、查看、回放、可视化、单步调试(linux)等

* 建立基于mf4数据格式的大规模数据处理能力(linux 下 分布式 mf4数据处理流)

* 建设与打通研发数据驱动测试链路：从存储源读取数据，(SiL、ViL、批量数据注入)仿真测试、子模块性能评价、KPI报道等

#### 仿真工具

* 单机SiL持续开发与维护

* 云SiL持续开发与部署

* ViL持续开发与维护

* 批量数据注入(开环)仿真框架开发与维护


#### 开发管理

* 强化研发项目组开发(项目)版本管理实践，消除实车与仿真不一致、消除各子模块间的不一致


#### 系统测试验证

@任亚星，补充 


#### 潜在业务支撑

* hwa量产数据链路

* 公司内部web服务维护

* 其他  




## 能力建设


* 赋能项目组研发量产

* 建立毫末系统验证能力@逄老师 

* 建立研发/量产数据价值能力 

* 人才梯度培养：工程能力、业务能力



